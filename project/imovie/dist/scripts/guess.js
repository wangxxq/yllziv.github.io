function getOriginMovies(e){$.ajax({type:"get",url:"http://"+serverIp+":19931/random?num="+e,async:!1,success:function(e){movieList=e}})}function showMovies(){for(var e=$(".movieblock"),o="",t=0;t<e.length;t++)e[t].id=t,$(e[t]).empty(),$(e[t]).append("<img src="+movieList[t].douban_movie_imgurl+" width='100px' height='150px'/>"),o=movieList[t].douban_movie_name,o.length>33&&(o=o.substr(0,30),o+="..."),$(e[t]).append("<p>"+o+"</p>"),$(e[t]).append("<a class='heartclick'><img class='unlove' src='../images/iconfont-unlove.png' width='30'/></a>")}function heartClick(){var e=$(this).children()[0];"unlove"==e.className?($(e).removeClass(),e.className="loved",e.src="../images/iconfont-love.png"):($(e).removeClass(),e.className="unlove",e.src="../images/iconfont-unlove.png");var o=$("#loveCount"),t=updataLovedCount();o.html(t)}function submitLoveClick(){addLovedMovies(),submitLovedMovies(JSON.stringify(lovedList))}function resetClick(){addLovedMovies(),choosedCount=updataLovedCount(),getOriginMovies(15),showMovies(),$("a").click(heartClick)}function submitLovedMovies(e){$.ajax({type:"post",url:"http://"+serverIp+":19931/individuality",data:e,success:function(e){console.log(e.length),console.log(e),movietest=e,returncount=e.length,maxCount=Math.floor(returncount/10),showMoveList(),$("#choose_movie").hide(),$("#MovieList").show(),$("#h1").html("你可能会喜欢它们呦~"),$("#h2").html("")}})}function addLovedMovies(){for(var e=$(".loved"),o=0;o<e.length;o++)lovedList.push(movieList[$(e[o]).parent().parent().attr("id")])}function updataLovedCount(){var e=choosedCount+$(".loved").length;return e}var movieList=[],lovedList=[],choosedCount=0,movietest=[],returncount,currentPage=1,maxCount=0,n=10,currentMax=0;$(document).ready(function(){$('.headList span[data-list="1"]').addClass("clickColor")}),jQuery(function(e){getOriginMovies(15),showMovies(),e("#reset").click(resetClick),e("a.heartclick").click(heartClick),e("#submitLove").click(submitLoveClick)});