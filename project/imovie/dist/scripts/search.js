function movietypeClick(){$(".movietype").slideToggle()}function movieLanguageClick(){$(".movielanguage").slideToggle()}function movietimeClick(){$(".movietime").slideToggle()}function doubanstarClick(){$(".doubanstar").slideToggle()}function movietypeliClick(){$(".movietypeSelect>span").text($(this).text()),$(".movietype").slideUp(),$(".movietypeSelect>span").addClass("choosed")}function movielanguageliClick(){$(".movielanguageSelect>span").text($(this).text()),$(".movielanguageSelect>span").addClass("choosed"),$(".movielanguage").slideUp()}function movietimeliClick(){$(".movietimeSelect>span").text($(this).text()),$(".movietimeSelect>span").addClass("choosed"),$(".movietime").slideUp()}function doubanstarliClick(){$(".doubanstarSelect>span").text($(this).text()),$(".doubanstarSelect>span").addClass("choosed"),$(".doubanstar").slideUp()}function lovemoreClick(){getMoreMovies(100,"爱情")}function horrormoreClick(){getMoreMovies(100,"惊悚")}function funnymoreClick(){getMoreMovies(100,"喜剧")}function actionmoreClick(){getMoreMovies(100,"动作")}function sciencemoreClick(){getMoreMovies(100,"科幻")}function cartoonmoreClick(){getMoreMovies(100,"动画")}function returnClick(){$(".recommendlist").hide(),$("#errorAlert").hide(),$(".main").show()}function submitlistClick(){if($("#errorAlert").hide(),4==$(".choosed").length){var e=$(".movietypeSelect>span").text(),i=$(".movielanguageSelect>span").text(),o=$(".movietimeSelect>span").text(),t=$(".doubanstarSelect>span").text();getAskMovies(100,e,i,o,t)}else $("#errorAlert>h1").html("请继续选择"),$("#errorAlert").show(),$("#errorAlert>.return").hide()}function getAskMovies(e,i,o,t,n){$.ajax({type:"get",url:"http://"+serverIp+":19931/theme?num="+e+"&myear="+t+"&mtype="+i+"&mlanguage="+o+"&mscore="+n,async:!1,success:function(e){e.length>0?(movietest=e,returncount=e.length,maxCount=Math.floor(returncount/10),e.length<10&&($("#MovieList>p:gt("+(e.length-1)+")").hide(),$("#MovieList>table:gt("+(e.length-1)+")").hide()),$(".main").hide(),$(".recommendlist").show(),showMoveList()):($("#errorAlert>h1").html("没有找到匹配的电影"),$("#errorAlert").show(),$("#errorAlert>.return").show(),$(".recommendlist").hide(),$(".main").hide())}})}function getMoreMovies(e,i){$.ajax({type:"get",url:"http://"+serverIp+":19931/themeone?num="+e+"&mtype="+i,async:!1,success:function(e){movietest=e,returncount=e.length,maxCount=Math.floor(returncount/10),e.length<10&&($("#MovieList>p:gt("+(e.length-1)+")").hide(),$("#MovieList>table:gt("+(e.length-1)+")").hide()),$(".main").hide(),$(".recommendlist").show(),showMoveList()}})}function showDiffTypeMovies(e,i,o){$.ajax({type:"get",url:"http://"+serverIp+":19931/themeone?num="+e+"&mtype="+i,async:!1,success:function(e){for(var i=e,t="",n=0;n<i.length;n++)$(o[n]).empty(),$(o[n]).append("<a href="+i[n].douban_movie_url+"><img src="+i[n].douban_movie_imgurl+" width='100px' height='150px'/></a>"),t=i[n].douban_movie_name,t.length>33&&(t=t.substr(0,30),t+="..."),$(o[n]).append("<p><a href="+i[n].douban_movie_url+">"+t+"</a></p>"),$(o[n]).append("<a class='scoring'>"+i[n].douban_movie_score+"</a>")}})}function showTypeMovies(){var e=$(".loveType>.line>.movieblock");showDiffTypeMovies(5,"爱情",e);var e=$(".horrorType>.line>.movieblock");showDiffTypeMovies(5,"惊悚",e);var e=$(".funnyType>.line>.movieblock");showDiffTypeMovies(5,"喜剧",e);var e=$(".actionType>.line>.movieblock");showDiffTypeMovies(5,"动作",e);var e=$(".scienceType>.line>.movieblock");showDiffTypeMovies(5,"科幻",e);var e=$(".cartoonType>.line>.movieblock");showDiffTypeMovies(5,"动画",e)}var movietest=[],returncount,currentPage=1,maxCount=0,n=10,currentMax=0;jQuery(function(e){e('.headList span[data-list="3"]').addClass("clickColor"),showTypeMovies(),e(".movietypeSelect").click(movietypeClick),e(".movielanguageSelect").click(movieLanguageClick),e(".movietimeSelect").click(movietimeClick),e(".doubanstarSelect").click(doubanstarClick),e(".movietype>ul>li").click(movietypeliClick),e(".movielanguage>ul>li").click(movielanguageliClick),e(".movietime>ul>li").click(movietimeliClick),e(".doubanstar>ul>li").click(doubanstarliClick),e(".submitlist").click(submitlistClick),e(".lovemore").click(lovemoreClick),e(".horrormore").click(horrormoreClick),e(".funnymore").click(funnymoreClick),e(".actionmore").click(actionmoreClick),e(".sciencemore").click(sciencemoreClick),e(".cartoonmore").click(cartoonmoreClick),e(".return").click(returnClick)});