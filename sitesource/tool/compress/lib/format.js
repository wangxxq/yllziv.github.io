function js_beautify(e,r,n,T){function _(){for(;N.length&&(" "===N[N.length-1]||N[N.length-1]===S);)N.pop()}function t(e){if(e="undefined"==typeof e?!0:e,_(),N.length){"\n"===N[N.length-1]&&e||N.push("\n");for(var r=0;T>r;r++)N.push(S)}}function a(){var e=N.length?N[N.length-1]:" ";" "!==e&&"\n"!==e&&e!==S&&N.push(" ")}function K(){N.push(A)}function c(){T++}function i(){T&&T--}function E(){N.length&&N[N.length-1]===S&&N.pop()}function O(e){C.push(s),s=e}function f(){k="DO_BLOCK"===s,s=C.pop()}function l(e,r){for(var n=0;n<r.length;n++)if(r[n]===e)return!0;return!1}function R(){var e=0,r="";do{if(P>=h.length)return["","TK_EOF"];r=h.charAt(P),P+=1,"\n"===r&&(e+=1)}while(l(r,p));if(e>1)for(var n=0;2>n;n++)t(0===n);var T=1===e;if(l(r,D)){if(P<h.length)for(;l(h.charAt(P),D)&&(r+=h.charAt(P),P+=1,P!==h.length););if(P!==h.length&&r.match(/^[0-9]+[Ee]$/)&&"-"===h.charAt(P)){P+=1;var _=R(P);return r+="-"+_[0],[r,"TK_WORD"]}return"in"===r?[r,"TK_OPERATOR"]:[r,"TK_WORD"]}if("("===r||"["===r)return[r,"TK_START_EXPR"];if(")"===r||"]"===r)return[r,"TK_END_EXPR"];if("{"===r)return[r,"TK_START_BLOCK"];if("}"===r)return[r,"TK_END_BLOCK"];if(";"===r)return[r,"TK_END_COMMAND"];if("/"===r){var a="";if("*"===h.charAt(P)){if(P+=1,P<h.length)for(;("*"!==h.charAt(P)||!h.charAt(P+1)||"/"!==h.charAt(P+1))&&P<h.length&&(a+=h.charAt(P),P+=1,!(P>=h.length)););return P+=2,["/*"+a+"*/","TK_BLOCK_COMMENT"]}if("/"===h.charAt(P)){for(a=r;"\r"!==h.charAt(P)&&"\n"!==h.charAt(P)&&(a+=h.charAt(P),P+=1,!(P>=h.length)););return P+=1,T&&t(),[a,"TK_COMMENT"]}}if("'"===r||'"'===r||"/"===r&&("TK_WORD"===u&&"return"===o||"TK_START_EXPR"===u||"TK_END_BLOCK"===u||"TK_OPERATOR"===u||"TK_EOF"===u||"TK_END_COMMAND"===u)){var K=r,c=!1;if(r="",P<h.length)for(;(c||h.charAt(P)!==K)&&(r+=h.charAt(P),c=c?!1:"\\"===h.charAt(P),P+=1,!(P>=h.length)););return P+=1,"TK_END_COMMAND"===u&&t(),[K+r+K,"TK_STRING"]}if(l(r,L)){for(;P<h.length&&l(r+h.charAt(P),L)&&(r+=h.charAt(P),P+=1,!(P>=h.length)););return[r,"TK_OPERATOR"]}return[r,"TK_UNKNOWN"]}var h,N,A,u,o,g,s,C,S,p,D,L,P,B,M,b,X,k,W,v;for(n=n||" ",r=r||4,S="";r--;)S+=n;for(h=e,g="",u="TK_START_EXPR",o="",N=[],k=!1,W=!1,v=!1,p="\n\r	 ".split(""),D="abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789_$".split(""),L="+ - * / % & ++ -- = += -= *= /= %= == === != !== > < >= <= >> << >>> >>>= >>= <<= && &= | || ! !! , : ? ^ ^= |=".split(" "),B="continue,try,throw,return,var,if,switch,case,default,for,while,break,function".split(","),s="BLOCK",C=[s],T=T||0,P=0,M=!1;;){var $=R(P);if(A=$[0],X=$[1],"TK_EOF"===X)break;switch(X){case"TK_START_EXPR":W=!1,O("EXPRESSION"),"TK_END_EXPR"===u||"TK_START_EXPR"===u||("TK_WORD"!==u&&"TK_OPERATOR"!==u?a():l(g,B)&&"function"!==g&&a()),K();break;case"TK_END_EXPR":K(),f();break;case"TK_START_BLOCK":O("do"===g?"DO_BLOCK":"BLOCK"),"TK_OPERATOR"!==u&&"TK_START_EXPR"!==u&&("TK_START_BLOCK"===u?t():a()),K(),c();break;case"TK_END_BLOCK":"TK_START_BLOCK"===u?(_(),i()):(i(),t()),K(),f();break;case"TK_WORD":if(k){a(),K(),a();break}if("case"===A||"default"===A){":"===o?E():(i(),t(),c()),K(),M=!0;break}b="NONE","TK_END_BLOCK"===u?l(A.toLowerCase(),["else","catch","finally"])?(b="SPACE",a()):b="NEWLINE":"TK_END_COMMAND"!==u||"BLOCK"!==s&&"DO_BLOCK"!==s?"TK_END_COMMAND"===u&&"EXPRESSION"===s?b="SPACE":"TK_WORD"===u?b="SPACE":"TK_START_BLOCK"===u?b="NEWLINE":"TK_END_EXPR"===u&&(a(),b="NEWLINE"):b="NEWLINE","TK_END_BLOCK"!==u&&l(A.toLowerCase(),["else","catch","finally"])?t():l(A,B)||"NEWLINE"===b?"else"===o?a():("TK_START_EXPR"!==u&&"="!==o||"function"!==A)&&("TK_WORD"!==u||"return"!==o&&"throw"!==o?"TK_END_EXPR"!==u?"TK_START_EXPR"===u&&"var"===A||":"===o||("if"===A&&"TK_WORD"===u&&"else"===g?a():t()):l(A,B)&&")"!==o&&t():a()):"SPACE"===b&&a(),K(),g=A,"var"===A&&(W=!0,v=!1);break;case"TK_END_COMMAND":K(),W=!1;break;case"TK_STRING":"TK_START_BLOCK"===u||"TK_END_BLOCK"===u?t():"TK_WORD"===u&&a(),K();break;case"TK_OPERATOR":var d=!0,I=!0;if(W&&","!==A&&(v=!0,":"===A&&(W=!1)),":"===A&&M){K(),t();break}if(M=!1,","===A){W?v?(K(),t(),v=!1):(K(),a()):"TK_END_BLOCK"===u?(K(),t()):"BLOCK"===s?(K(),t()):(K(),a());break}"--"===A||"++"===A?";"===o?(d=!0,I=!1):(d=!1,I=!1):"!"===A&&"TK_START_EXPR"===u?(d=!1,I=!1):"TK_OPERATOR"===u?(d=!1,I=!1):"TK_END_EXPR"===u?(d=!0,I=!0):"."===A?(d=!1,I=!1):":"===A&&(d=!!o.match(/^\d+$/)),d&&a(),K(),I&&a();break;case"TK_BLOCK_COMMENT":t(),K(),t();break;case"TK_COMMENT":a(),K(),t();break;case"TK_UNKNOWN":K()}u=X,o=A}return N.join("")}function CSSencode(e){return e=e.replace(/\r\n/gi,""),e=e.replace(/(\s){2,}/gi,"$1"),e=e.replace(/\t/gi,""),e=e.replace(/\n\}/gi,"}"),e=e.replace(/\n\{\s*/gi,"{"),e=e.replace(/(\S)\s*\}/gi,"$1}"),e=e.replace(/(\S)\s*\{/gi,"$1{"),e=e.replace(/\{\s*(\S)/gi,"{$1")}function CSSdecode(e){return e=e.replace(/(\s){2,}/gi,"$1"),e=e.replace(/(\S)\s*\{/gi,"$1 {"),e=e.replace(/\*\/(.[^\}\{]*)}/gi,"*/\n$1}"),e=e.replace(/\/\*/gi,"\n/*"),e=e.replace(/;\s*(\S)/gi,";\n	$1"),e=e.replace(/\}\s*(\S)/gi,"}\n$1"),e=e.replace(/\n\s*\}/gi,"\n}"),e=e.replace(/\{\s*(\S)/gi,"{\n	$1"),e=e.replace(/(\S)\s*\*\//gi,"$1*/"),e=e.replace(/\*\/\s*([^\}\{]\S)/gi,"*/\n	$1"),e=e.replace(/(\S)\}/gi,"$1\n}"),e=e.replace(/(\n){2,}/gi,"\n"),e=e.replace(/:/gi,":"),e=e.replace(/  /gi," ")}